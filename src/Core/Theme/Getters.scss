///
/// Punica CSS Framework
/// Core/Theme/Getters.scss
/// 

@use "sass:map" as map;
@use "sass:list" as list;

/// ======================================================
	$theme-map: null !default;
/// ======================================================

///
/// Get active theme's value by key(s) from the theme map
///
/// @param {String} $node
/// @param {List} $key(s)
///
/// @example theme('name')
/// @example theme('color', 'primary')
/// @example theme('elements', 'button', 'font-weight')
///
/// @return mixed
/// 
@function theme($node, $keys...) 
{
	@if list.length($keys) > 4 {
		@warn "[PUNICA]:: Maximum Nesting Depth is 4.";
	}

	$value: if(map.has-key($theme-map, $node), map.get($theme-map, $node), null);

	@if ($value != null and list.length($keys) > 0) {
		$value: if(map.has-key($value, list.nth($keys, 1)), map.get($value, list.nth($keys, 1)), null);

		@for $key from 1 through list.length($keys) {
			@if ($value != null and list.length($keys) > $key) {
				$value: if(map.has-key($value, list.nth($keys, $key)), map.get($value, list.nth($keys, $key)), null);
				
				@if ($value != null) {
					@return $value;
				}
			}
		}
	}

	@return $value;
}
